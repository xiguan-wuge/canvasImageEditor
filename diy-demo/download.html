<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
</head>

<body>
  <canvas id="canvas1" width="500" height="500"></canvas>
  <canvas id="canvas2" width="500" height="500"></canvas>
  <button onclick="mergeCanvas()">Merge and Download</button>

  <script>
    function mergeCanvas() {
      // 获取两个canvas元素
      const canvas1 = document.getElementById('canvas1');
      const canvas2 = document.getElementById('canvas2');

      // 获取canvas的宽度和高度（假设它们的尺寸相同）
      const width = canvas1.width;
      const height = canvas1.height;

      // 创建一个新的canvas用于合并
      const mergedCanvas = document.createElement('canvas');
      mergedCanvas.width = width;
      mergedCanvas.height = height;
      const ctx = mergedCanvas.getContext('2d');

      // 将第一个canvas绘制到新canvas上
      ctx.drawImage(canvas1, 0, 0);

      // 将第二个canvas绘制到新canvas上
      ctx.drawImage(canvas2, 0, 0);

      // 导出合并后的canvas为图片
      mergedCanvas.toBlob(function (blob) {
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'merged_image.png'; // 可以指定文件名
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url); // 释放URL对象
      });
    }

    // 示例代码：在两个canvas上绘制不同的内容
    function drawExample() {
      const canvas1 = document.getElementById('canvas1');
      const ctx1 = canvas1.getContext('2d');
      ctx1.fillStyle = 'red';
      ctx1.fillRect(50, 50, 200, 200);

      const canvas2 = document.getElementById('canvas2');
      const ctx2 = canvas2.getContext('2d');
      ctx2.fillStyle = 'blue';
      ctx2.arc(250, 250, 100, 0, 2 * Math.PI);
      ctx2.fill();
    }

    // 初始化示例
    drawExample();
  </script>
</body>

</html>