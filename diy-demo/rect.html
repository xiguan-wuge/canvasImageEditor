<!DOCTYPE html>  
<html lang="en">  
<head>  
<meta charset="UTF-8">  
<title>Draggable Rectangle on Canvas</title>  
<style>  
    canvas {  
        border: 1px solid black;  
    }  
</style>  
</head>  
<body>  
<canvas id="myCanvas" width="400" height="400"></canvas>  
  
<script>  
    var canvas = document.getElementById('myCanvas');  
    var ctx = canvas.getContext('2d');  
  
    var rect = {  
        x: 100,  
        y: 100,  
        width: 50,  
        height: 50,  
        dragging: false  
    };  
  
    // 绘制矩形  
    function drawRectangle() {  
        ctx.clearRect(0, 0, canvas.width, canvas.height); // 清除画布  
        ctx.fillStyle = 'blue';  
        ctx.fillRect(rect.x, rect.y, rect.width, rect.height);  
    }  
  
    // 监听鼠标按下事件  
    canvas.addEventListener('mousedown', function(e) {  
        var mouseX = e.offsetX;  
        var mouseY = e.offsetY;  
  
        // 检查鼠标是否在矩形内部  
        if (mouseX > rect.x && mouseX < rect.x + rect.width &&  
            mouseY > rect.y && mouseY < rect.y + rect.height) {  
            rect.dragging = true;  
        }  
    });  
  
    // 监听鼠标移动事件  
    canvas.addEventListener('mousemove', function(e) {  
        if (rect.dragging) {  
            var mouseX = e.offsetX;  
            var mouseY = e.offsetY;  
  
            // 更新矩形的位置  
            rect.x = mouseX - rect.width / 2;  
            rect.y = mouseY - rect.height / 2;  
  
            drawRectangle(); // 重新绘制矩形  
        }  
    });  
  
    // 监听鼠标释放事件  
    canvas.addEventListener('mouseup', function() {  
        rect.dragging = false;  
    });  
  
    // 初始绘制矩形  
    drawRectangle();  
</script>  
</body>  
</html>